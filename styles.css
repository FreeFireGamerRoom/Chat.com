:root{
  --bg: #ffffff;
  --text: #111;
  --muted: #666;
  --accent: #0b65ff;
  --surface: #f7f7f8;
  --glass: rgba(0,0,0,0.04);
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial;
  color-scheme: light;
}
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.container{
  width:100%;
  max-width:920px;
  height:100%;
  display:flex;
  flex-direction:column;
  border-radius:12px;
  background:linear-gradient(180deg, var(--bg), var(--surface));
  box-shadow:0 6px 30px rgba(10,10,10,0.06);
  overflow:hidden;
}
/* onboarding screens */
.onboardRoot{
  position:fixed;
  inset:0;
  background:#fff;
  z-index:60;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.onboardScreen{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;padding:24px;width:100%;height:100%;}
.hidden{display:none}
.onboardTitle{position:absolute;top:28px;left:50%;transform:translateX(-50%);font-weight:600;text-transform:none;color:var(--text)}
.onboardLargeBtn{
  width:min(60vw,560px);
  aspect-ratio:8 / 1;
  border-radius:12px;
  border:1px solid var(--glass);
  background:var(--accent);
  color:white;
  font-weight:700;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
}
.loadingSplash{background:#fff;display:flex;align-items:center;justify-content:center}
.spinner{
  width:64px;height:64px;border-radius:50%;
  border:6px solid rgba(0,0,0,0.08);
  border-top-color:var(--accent);
  animation:spin 900ms linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.usernameArea{display:flex;flex-direction:column;align-items:center;gap:18px}
.usernameLine{
  width:min(70vw,560px);
  border:none;
  border-bottom:2px solid var(--glass);
  padding:8px 6px;
  font-size:18px;
  outline:none;
  text-align:center;
}
.usernameStatus {
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
}
.greetText{
  max-width:880px;
  padding:28px;
  font-size:16px;
  color:var(--text);
  line-height:1.45;
  text-align:left;
  max-height: calc(100vh - 180px); /* ensure text area is scrollable so user can scroll to read */
  overflow:auto;
}
.greetHint{font-size:13px;color:var(--muted);margin-top:12px}
/* make greet screen align content to top so content begins at start of text */
.greetScreen {
  align-items:flex-start;
  padding-top:72px;
  overflow:auto;
}
/* ensure onboarding hidden on small screens handled by .hidden */
@media (max-width:420px){ .onboardTitle{top:18px;font-size:16px} .onboardLargeBtn{width:88vw} .usernameLine{width:88vw} }
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 18px;
  border-bottom:1px solid var(--glass);
}
.title{font-weight:600}
.meta{display:flex;gap:8px;align-items:center}
.badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:var(--glass);
  padding:6px 10px;
  border-radius:999px;
  font-size:13px;
  color:var(--muted);
}
.small{
  background:transparent;
  border:1px solid var(--glass);
  padding:6px 10px;
  border-radius:8px;
  font-size:13px;
  color:var(--muted);
  cursor:pointer;
}
.content{
  display:flex;
  flex:1;
  min-height:0;
}
.peers{
  /* sliding panel from the right */
  position:fixed;
  top:0;
  right:0;
  height:100vh;
  width:410px; /* requested exact width */
  max-width:100%;
  transform:translateX(100%);
  transition:transform 260ms ease;
  background:var(--bg);
  box-shadow: -18px 0 40px rgba(10,10,10,0.06);
  padding:18px;
  z-index:30;
  overflow:auto;
}
.peers.open{transform:translateX(0)}
.hidden{display:none}
/* backdrop when panel is open */
.panel-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.28);
  z-index:20;
  opacity:0;
  transition:opacity 200ms ease;
}
.panel-backdrop.visible{opacity:1}
.peers h4{margin:0 0 8px 0;font-size:13px;color:var(--muted)}
.peersList{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.peerItem{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px;
  border-radius:8px;
  background:#fff0;
}
.avatar{
  width:36px;height:36px;border-radius:8px;flex:0 0 36px;object-fit:cover;background:var(--glass)
}
.peerName{font-size:14px}
.chatArea{flex:1;display:flex;flex-direction:column;min-width:0}
.messages{
  padding:14px;
  overflow:auto;
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
  background:transparent;
}
.msg{
  display:flex;
  gap:10px;
  align-items:flex-start;
  justify-content:flex-start;
}
.msg.right {
  justify-content:flex-end;
  flex-direction:row-reverse;
}
.msg.right .msgBody {
  background:#e6f0ff;
  border-radius:10px 10px 4px 10px;
  max-width:70%;
}
.msg.left .msgBody {
  background:#f6f7fb;
  border-radius:10px 10px 10px 4px;
  max-width:70%;
}
.msg.right .avatar {
  margin-left:10px;
  margin-right:0;
}
.msg.left .avatar {
  margin-right:10px;
  margin-left:0;
}
.msgBody{
  max-width:70%;
  background:#f6f7fb;
  padding:10px 12px;
  border-radius:10px;
  box-shadow:0 1px 0 rgba(0,0,0,0.02);
}
.msgBody.blurry {
  filter: blur(6px);
  opacity: 0.3; /* 30% visible */
  transition: filter 300ms ease, opacity 300ms ease;
  pointer-events: none; /* prevent interactions on blurred messages */
}
.msgBody.blurredHidden {
  color: var(--muted);
  font-style: italic;
  opacity: 0.95;
  pointer-events: none;
}
.msgHeader{display:flex;align-items:center;gap:8px;margin-bottom:6px;font-size:13px;color:var(--muted)}
.msgText{font-size:15px;color:var(--text);white-space:pre-wrap;word-break:break-word}
.composer{
  display:flex;
  gap:10px;
  padding:12px;
  border-top:1px solid var(--glass);
  background:var(--surface);
}
.input{
  flex:1;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--glass);
  outline:none;
  font-size:15px;
}
.send{
  background:var(--accent);
  color:white;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}
.footer{padding:10px 14px;border-top:1px solid var(--glass);font-size:12px;color:var(--muted)}
.botInfo{min-height:20px;display:flex;align-items:center;gap:10px;color:var(--muted);font-size:13px}
@media (max-width:680px){
  .container{max-width:100%;height:100vh;border-radius:0}
  .peers{display:none}
  .msgBody{max-width:84%}
}
/* new: subtle page shake when admin triggers .sharigan */
.container.shake {
  animation: shakePage 600ms ease-in-out infinite;
}
@keyframes shakePage {
  0% { transform: translateY(0) }
  25% { transform: translateY(-6px) rotate(-0.5deg) }
  50% { transform: translateY(0) rotate(0) }
  75% { transform: translateY(6px) rotate(0.5deg) }
  100% { transform: translateY(0) }
}

/* floating text effect applied to message bodies from targeted user */
.msgBody.floating {
  position:relative;
  overflow:visible;
}
.msgBody.floating .msgText {
  display:inline-block;
  animation: floatText 4s ease-in-out infinite;
}
@keyframes floatText {
  0% { transform: translateY(0) }
  50% { transform: translateY(-8px) }
  100% { transform: translateY(0) }
}

/* new: intensified scatter mode that breaks messages into flying fragments */
.container.scatter {
  /* stronger, more chaotic motion */
  animation: scatterPage 900ms linear infinite;
}
@keyframes scatterPage {
  0% { transform: translate(0,0) rotate(0) }
  25% { transform: translate(-8px,-6px) rotate(-1deg) }
  50% { transform: translate(6px,8px) rotate(1deg) }
  75% { transform: translate(-6px,6px) rotate(-0.5deg) }
  100% { transform: translate(0,0) rotate(0) }
}

/* message bodies when scattered create flying fragments */
.msgBody.scattered { overflow:visible; position:relative; }
.msgBody.scattered .msgText {
  display:inline-block;
  white-space:pre-wrap;
  animation: scatterText 1500ms ease-in-out infinite;
}
/* small random translations & rotations to simulate scattering */
@keyframes scatterText {
  0% { transform: translate(0,0) rotate(0); opacity:1 }
  20% { transform: translate(-18px,-12px) rotate(-8deg); opacity:0.9 }
  40% { transform: translate(22px,8px) rotate(6deg); opacity:0.8 }
  60% { transform: translate(-10px,18px) rotate(-6deg); opacity:0.9 }
  80% { transform: translate(12px,-10px) rotate(4deg); opacity:0.95 }
  100% { transform: translate(0,0) rotate(0); opacity:1 }
}

/* add pseudo-rectangular fragments using multiple layered shadows to feel like boxes flying */
.msgBody.scattered::before,
.msgBody.scattered::after {
  content:'';
  position:absolute;
  width:30%;
  height:12px;
  background:rgba(255,255,255,0.85);
  border-radius:6px;
  top:6px;
  left:-12px;
  transform-origin:center;
  pointer-events:none;
  box-shadow: 0 8px 18px rgba(0,0,0,0.12);
  animation: fragmentFly 1200ms ease-in-out infinite;
}
.msgBody.scattered::after {
  width:36%;
  height:14px;
  left:auto;
  right:-14px;
  top:auto;
  bottom:6px;
  animation-delay: 200ms;
}
@keyframes fragmentFly {
  0% { transform: translate(0,0) rotate(0); opacity:1 }
  50% { transform: translate(-30px,-40px) rotate(-25deg); opacity:0.6 }
  100% { transform: translate(0,0) rotate(0); opacity:1 }
}